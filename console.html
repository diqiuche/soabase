<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-03-10 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150310" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Soabase &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/soabase/soabase">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Soabase</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-03-10
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.3.1
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Soabase</li>
                              
      <li>
  
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="soaconfig.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="example.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                              <li class="nav-header">Features</li>
                              
      <li>
  
                          <a href="discovery.html" title="Service Discovery">
          <i class="none"></i>
        Service Discovery</a>
            </li>
                
      <li>
  
                          <a href="client.html" title="REST Client">
          <i class="none"></i>
        REST Client</a>
            </li>
                
      <li>
  
                          <a href="attributes.html" title="Dynamic Attributes">
          <i class="none"></i>
        Dynamic Attributes</a>
            </li>
                
      <li>
  
                          <a href="admin.html" title="Admin APIs">
          <i class="none"></i>
        Admin APIs</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Admin Console</a>
          </li>
                
      <li>
  
                          <a href="config.html" title="Config Utils">
          <i class="none"></i>
        Config Utils</a>
            </li>
                
      <li>
  
                          <a href="guice.html" title="Guice Integration">
          <i class="none"></i>
        Guice Integration</a>
            </li>
                              <li class="nav-header">Details</li>
                              
      <li>
  
                          <a href="source-repository.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                
      <li>
  
                          <a href="issue-tracking.html" title="Issues">
          <i class="none"></i>
        Issues</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="JavaDoc">
          <i class="none"></i>
        JavaDoc</a>
            </li>
                
      <li>
  
                          <a href="team-list.html" title="Team">
          <i class="none"></i>
        Team</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="project-summary.html" title="Summary">
          <i class="none"></i>
        Summary</a>
            </li>
                
      <li>
  
                          <a href="dependency-management.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=https://github.com/soabase/soabase&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2><a name="Administration_Console"></a>Administration Console</h2>
<p>The Soabase administration console is a customizable view of your entire SOA cluster. With it you can...</p>
<ul>
<li>See the status of each instance</li>
<li>Force register/unregister any instance</li>
<li>View log files for any instance</li>
<li>View stack traces for any instance</li>
<li>Monitor VM details for any Dropwizard metric</li>
<li>Create, read, update, delete Dynamic Attributes</li>
<li>Add your own custom UIs</li>
<li>Add your own custom metric views</li></ul>
<div class="section">
<h3><a name="UsageBuilding"></a>Usage/Building</h3>
<p>The Administration Console is a standard Dropwizard application that, itself, uses Soabase. To create a console for your SOA system, start a new Dropwizard project and include a dependency for the Soabase admin console:</p>
<p><tt>io.soabase:soabase-admin</tt></p>
<p>Use the <tt>AdminConsoleAppBuilder</tt> to create the application instance. The main builder methods are:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center">withConfigurationClass()</td>
<td align="center"><b>required</b> - this is the class of your Configuration file. The Soabase admin console needs the same configuration that you use for your Soabase services so that it can access Discovery, Attribute, etc. config fields.</td></tr>
<tr class="b">
<td align="center">addingBundle()</td>
<td align="center">add any additional bundles. E.g. <tt>SqlBundle</tt> and <tt>CuratorBundle</tt></td></tr>
<tr class="a">
<td align="center">addingTabComponent()</td>
<td align="center">adds a custom tab</td></tr>
<tr class="b">
<td align="center">addingMetricComponent()</td>
<td align="center">adds a custom metric</td></tr>
<tr class="a">
<td align="center">withAuthSpec()</td>
<td align="center">adds authentication (see below)</td></tr></table>
<p>Call <tt>build()</tt> to build a new admin console application instance. Then, use Dropwizard methods to run the application.</p></div>
<div class="section">
<h3><a name="Running"></a>Running</h3>
<p>Build your admin console as described in the <a class="externalLink" href="http://dropwizard.io/getting-started.html#building-fat-jars">Dropwizard docs</a>. When you run the application, you will be able to see the console from a browser. Assuming port 8080, go to <a class="externalLink" href="http://localhost:8080">http://localhost:8080</a>.</p><img src="images/admin-services.png" alt="" />
<p><tt> </tt></p>
<p>For details on using the console, see the <a href="./example-console.html">Admin Console Example page</a>.</p></div>
<div class="section">
<h3><a name="Authentication"></a>Authentication</h3>
<p>The console supports simple, LDAP or custom authentication. To enable authentication, add an <tt>AuthSpec</tt> instance to the <tt>AdminConsoleAppBuilder</tt>. Supply the <tt>AuthSpec</tt> with an <tt>AuthMethod</tt>, the set of fields (username, email, etc.) to add to the login form and, optionally, the SSL port to use for login.</p>
<p>Two AuthMethod implementations are provided. You can also write your own.</p>
<div class="section">
<h4><a name="SimpleAuthMethod"></a>SimpleAuthMethod</h4>
<p>This auth method allows you to hard code a set of username/passwords that will be accepted for login.</p></div>
<div class="section">
<h4><a name="LdapAuthMethod"></a>LdapAuthMethod</h4>
<p>Uses the Java &quot;com.sun.jndi.ldap.LdapCtxFactory&quot; to do LDAP authentication. Supply LdapAuthMethod with the LDAP URI and query string. The query string can have substitutions for username, email and domain via <tt>$USER$</tt>, <tt>$EMAIL$</tt>, and <tt>$DOMAIN$</tt>. E.g. <tt>uid=$USER$,dc=$DOMAIN$</tt>.</p></div>
<div class="section">
<h4><a name="Custom"></a>Custom</h4>
<p>You can add a custom authentication mechanism by implementing the <tt>AuthMethod</tt> interface.</p></div></div>
<div class="section">
<h3><a name="Customizing"></a>Customizing</h3>
<div class="section">
<h4><a name="Adding_a_custom_metric"></a>Adding a custom metric</h4>
<p>You can add a custom graph for any Dropwizard metric to the admin console's details page by calling <tt>addingMetricComponent()</tt> in the app console builder passing a <tt>MetricComponent</tt> with a description of the metric:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center"><b>Field</b></td>
<td align="center"><b>Description</b></td></tr>
<tr class="b">
<td align="center"><i>MetricComponent</i></td>
<td align="center"></td></tr>
<tr class="a">
<td align="center">id</td>
<td align="center">A unique ID for your metric</td></tr>
<tr class="b">
<td align="center">type</td>
<td align="center">The metric type (see below)</td></tr>
<tr class="a">
<td align="center">name</td>
<td align="center">The display name of your metric</td></tr>
<tr class="b">
<td align="center">label</td>
<td align="center">The label for the Y axis of the graph</td></tr>
<tr class="a">
<td align="center">metrics</td>
<td align="center">List of metrics to display in the graph (see below)</td></tr>
<tr class="b">
<td align="center">targetedServiceName</td>
<td align="center">Optional - if specified, the custom metric only displays for the specified service</td></tr>
<tr class="a">
<td align="center">&#xa0;</td>
<td align="center">&#xa0;</td></tr>
<tr class="b">
<td align="center"><i>MetricType</i></td>
<td align="center"></td></tr>
<tr class="a">
<td align="center">STANDARD</td>
<td align="center">Plots the metric values unchanged</td></tr>
<tr class="b">
<td align="center">PERCENT</td>
<td align="center">Converts the metric values to percents from double values between 0 and 1</td></tr>
<tr class="a">
<td align="center">DELTA</td>
<td align="center">Plots each metric value as a delta from the previous metric value</td></tr>
<tr class="b">
<td align="center">&#xa0;</td>
<td align="center">&#xa0;</td></tr>
<tr class="a">
<td align="center"><i>Metric</i></td>
<td align="center"></td></tr>
<tr class="b">
<td align="center">label</td>
<td align="center">The label for the X axis of the graph</td></tr>
<tr class="a">
<td align="center">path</td>
<td align="center">Dropwizard metric to display. See below for details.</td></tr></table>
<p><b>Custom Metric Path</b></p>
<p>The custom metric path syntax can be a simple value or a predicate function:</p>
<ul>
<li>Simple Value
<p>The syntax is that of a Javascript array reference. The Soabase admin console calls <tt>eval('data.' + path)</tt> to get the value to plot. 'data' is the JSON object generated by the Dropwizard metrics servlet. E.g. <tt>gauges['system.cpu.load'].value</tt></p></li>
<li>Predicate Function
<p>All of the values generated by the Dropwizard metrics servlet are applied to the given predicate function. This function should return either <tt>null</tt> or an object to graph. The predicate signature is: <tt>function(obj, name)</tt> where &quot;obj&quot; is the metric field and &quot;name&quot; is the full name. The object returned by the predicate should be: <tt>{label: 'label to display', value: value}</tt>.</p>
<p>The path syntax for specifying a predicate function is: &quot;metricList(predicate)&quot; where &quot;predicate&quot; is your predicate function. E.g. <tt>metricList(function(obj, name){return (name === 'foo') ? {label: 'hey', value: obj.value} : null})</tt></p>
<p>A utility supplier, <tt>vmMakePrefixSuffixPredicate()</tt>, is available to search for metrics with a given prefix and suffix. Soabase uses this to display GC metrics. E.g. <tt>new Metric(&quot;GC Times&quot;, &quot;metricList(vmMakePrefixSuffixPredicate('gauges.jvm.gc.', '.time'))&quot;)</tt>.</p></li></ul></div>
<div class="section">
<h4><a name="Adding_a_custom_tab"></a>Adding a custom tab</h4>
<p>To add a custom tab create an HTML file for your tab and, optionally, css and javascript files and any other assets. Then, call <tt>addingTabComponent()</tt> in the app console builder passing a <tt>TabComponent</tt>:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center"><b>Field</b></td>
<td align="center"><b>Description</b></td></tr>
<tr class="b">
<td align="center"><i>TabComponent</i></td>
<td align="center"></td></tr>
<tr class="a">
<td align="center">id</td>
<td align="center">A unique ID for your tab</td></tr>
<tr class="b">
<td align="center">name</td>
<td align="center">The display name of your tab</td></tr>
<tr class="a">
<td align="center">contentResourcePath</td>
<td align="center">The source path for your tab's HTML file</td></tr>
<tr class="b">
<td align="center">javascriptUris</td>
<td align="center">Relative URIs for any javascript files to reference</td></tr>
<tr class="a">
<td align="center">cssUris</td>
<td align="center">Relative URIs for any css files to reference</td></tr>
<tr class="b">
<td align="center">assetsPaths</td>
<td align="center">List of AssetsPaths (see below)</td></tr>
<tr class="a">
<td align="center">&#xa0;</td>
<td align="center">&#xa0;</td></tr>
<tr class="b">
<td align="center"><i>AssetsPath</i></td>
<td align="center"></td></tr>
<tr class="a">
<td align="center">resourcePath</td>
<td align="center">The source path</td></tr>
<tr class="b">
<td align="center">uriPath</td>
<td align="center">The uri of the assets</td></tr></table>
<p>Custom tabs are bound into the admin console source. Your tab's HTML file will be merged into the admin console's HTML file. So, be aware that you are in a shared environment. Use unique IDs, class names etc.</p>
<div class="section">
<h5><a name="Frameworks"></a>Frameworks</h5>
<p>The admin console uses <a class="externalLink" href="http://getbootstrap.com/">Twitter Bootstrap</a>. Your tab can take advantage of this. The following frameworks are automatically included:</p>
<ul>
<li><a class="externalLink" href="http://jquery.com/">jquery</a></li>
<li><a class="externalLink" href="http://getbootstrap.com">bootstrap</a></li>
<li><a class="externalLink" href="http://getbootstrap.com/examples/theme/">bootstrap-theme</a></li>
<li><a class="externalLink" href="http://bootboxjs.com/">bootbox</a></li></ul></div>
<div class="section">
<h5><a name="Templates"></a>Templates</h5>
<p>The admin console includes a very simple template system. In your HTML file, you can define templates that can be used to generate content. The form for templates is:</p>
<div class="source">
<pre>&lt;div class=&quot;soa-template&quot; id=&quot;unique-template-id&quot;&gt;
    Your content goes here. Add any VARIABLE that can be substituted
    later on.
&lt;/div&gt;</pre></div>
<p>Then, in your javascript file, you can get the content of your template:</p>
<div class="source">
<pre>var template = soaGetTemplate('unique-template-id', {
    'VARIABLE': substitution
});</pre></div></div>
<div class="section">
<h5><a name="APIS"></a>APIS</h5>
<p>The following APIs can be used by your tab's javascript:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="center">getParameterByName()</td>
<td align="center">Returns query parameters by name</td></tr>
<tr class="b">
<td align="center">soaShowInfiniteProgressBar()</td>
<td align="center">Displays an &quot;in progress&quot; UI in the top right corner</td></tr>
<tr class="a">
<td align="center">soaHideInfiniteProgressBar()</td>
<td align="center">Hide the &quot;in progress&quot; UI</td></tr></table></div>
<div class="section">
<h5><a name="Development_Mode"></a>Development Mode</h5>
<p>The Administration Console caches the merged HTML file at runtime. This can make developing your custom tab a pain; needing to restart the app after every change. During development, take advantage of &quot;force mode&quot;. Instead of the normal URL, use <tt>http://localhost:8080/force</tt>. This will cause the Administration Console to rebuild the HTML file on every request.</p></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014&#x2013;2015
                        <a href="http://soabase.github.io/">Soabase</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
