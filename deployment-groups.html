<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-07-26 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160726" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Soabase &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/soabase/soabase">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Soabase</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-07-26
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.11.0
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Soabase</li>
                              
      <li>
  
                          <a href="index.html" title="About">
          <span class="none"></span>
        About</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Getting Started">
          <span class="none"></span>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="soaconfig.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="example.html" title="Examples">
          <span class="none"></span>
        Examples</a>
            </li>
                              <li class="nav-header">Features</li>
                              
      <li>
  
                          <a href="discovery.html" title="Service Discovery">
          <span class="none"></span>
        Service Discovery</a>
            </li>
                
      <li>
  
                          <a href="client.html" title="REST Client">
          <span class="none"></span>
        REST Client</a>
            </li>
                
      <li>
  
                          <a href="attributes.html" title="Dynamic Attributes">
          <span class="none"></span>
        Dynamic Attributes</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Deployment Groups</a>
          </li>
                
      <li>
  
                          <a href="admin.html" title="Admin APIs">
          <span class="none"></span>
        Admin APIs</a>
            </li>
                
      <li>
  
                          <a href="console.html" title="Admin Console">
          <span class="none"></span>
        Admin Console</a>
            </li>
                
      <li>
  
                          <a href="config.html" title="Config Utils">
          <span class="none"></span>
        Config Utils</a>
            </li>
                
      <li>
  
                          <a href="guice.html" title="Guice Integration">
          <span class="none"></span>
        Guice Integration</a>
            </li>
                
      <li>
  
                          <a href="launcher.html" title="Launcher Script">
          <span class="none"></span>
        Launcher Script</a>
            </li>
                              <li class="nav-header">Details</li>
                              
      <li>
  
                          <a href="source-repository.html" title="Source Code">
          <span class="none"></span>
        Source Code</a>
            </li>
                
      <li>
  
                          <a href="issue-tracking.html" title="Issues">
          <span class="none"></span>
        Issues</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="JavaDoc">
          <span class="none"></span>
        JavaDoc</a>
            </li>
                
      <li>
  
                          <a href="team-list.html" title="Team">
          <span class="none"></span>
        Team</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="project-summary.html" title="Summary">
          <span class="none"></span>
        Summary</a>
            </li>
                
      <li>
  
                          <a href="dependency-management.html" title="Dependencies">
          <span class="none"></span>
        Dependencies</a>
            </li>
                
      <li>
  
                          <a href="license.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                   
        
        
        
    <iframe src="https://www.facebook.com/plugins/like.php?href=https://github.com/soabase/soabase&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="Deployment_Groups"></a>Deployment Groups</h2>
<p>Deployment groups work in conjunction with <a href="./discovery.html">Service Discovery</a> to support <i>red/black</i> style deployments. With red/black deployments you deploy a new version of a service while the old version of the service is still running. However, the old version is removed from Service Discovery. This way, the new version can be validated while the old version is in hot standby in case the new version fails and needs to reverted for some reason. You could even have three or more active versions with some in Discovery and some not. This can also be used to do A/B style testing.</p>
<div class="section">
<h3><a name="Usage"></a>Usage</h3>
<p>Every instance is defined to be in one or more deployment groups via <a href="./soaconfig.html">Soabase Configuration</a>. There is always a &quot;default&quot; deployment group that instances are part of if not defined to be in other groups. Deployment Groups are service specific. i.e. the deployment group &quot;v1.0&quot; in service &quot;cache&quot; is different than a group with the same name in service &quot;logging&quot;.</p>
<p>By default, deployment groups are active. They can be deactivated via the <a href="./console.html">Admin Console</a> or via <a href="./admin.html">Admin APIs</a>.</p></div>
<div class="section">
<h3><a name="DeploymentGroupManager"></a>DeploymentGroupManager</h3>
<p>Deployment groups are managed internally by an instance of <tt>DeploymentGroupManager</tt>. The default implementation stores deployment group active state in <a href="./attributes.html">Dynamic Attributes</a>. The key used is formed using this pattern (where SERVICE is the service name and GROUP is the group name):</p>
<div class="source"><pre class="prettyprint">_soabase_deployment_group_SERVICE_GROUP</pre></div>
<p>The value of the attribute is &quot;true&quot; if the group is active or &quot;false&quot; if inactive. Instances that are part of an inactive deployment group will not be returned from Service Discovery.</p>
<p>If needed, you can use a custom DeploymentGroupManager.</p></div>
<div class="section">
<h3><a name="Adding_a_Custom_Implementation"></a>Adding a Custom Implementation</h3>
<p>To use something other than the default DeploymentGroupManager implementation, follow these steps:</p>
<ul>
<li>Create implementations for <tt>DeploymentGroupFactory</tt> and <tt>DeploymentGroupManager</tt></li>
<li>Add a directory named <tt>META-INF/services</tt> that contains two files: <tt>io.dropwizard.jackson.Discoverable</tt> and <tt>io.soabase.core.features.discovery.deployment.DeploymentGroupFactory</tt>.</li></ul>
<p><i>DeploymentGroupFactory</i></p>
<p>Your DeploymentGroupFactory implementation is like other Dropwizard factories. It should be both configuration and a factory. Use <tt>DefaultDeploymentGroupFactory.java</tt> as an example. This class must be annotated with <tt>JsonTypeName</tt> and given a unique name. You then use this name as the value for the attributes type in your configuration file.</p>
<p><i>DeploymentGroupManager</i></p>
<p>Your implementation does the actual work of Deployment Group management. The details will depend on your implementation's needs.</p>
<p><i>ServiceLoader files</i></p>
<p>Like other Dropwizard plugins, your implementation needs Service Loader files. In the <tt>io.dropwizard.jackson.Discoverable</tt> file add a line containing: <tt>io.soabase.core.features.discovery.deployment.DeploymentGroupFactory</tt>. In the <tt>io.soabase.core.features.discovery.deployment.DeploymentGroupFactory</tt> file add a line the with fully-qualified path name of your class. E.g. <tt>com.me.my.MyDeploymentGroupManager</tt></p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2014&#x2013;2016
                        <a href="http://soabase.github.io/">Soabase</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
